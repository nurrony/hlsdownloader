pre-commit:
  parallel: false
  jobs:
    - name: 'Lint and Fix Coding Style'
      stage_fixed: true
      exclude:
        - 'docs/**/*'
        - 'dist/**/*'
        - 'coverage/**'
        - 'coverage/**/*'
        - 'node_modules/**/*'
      glob:
        - 'src/**/*.ts'
        - 'eslint.config.js'
        - '*.json'
      run: npm run lint:fix

    - name: 'Running Unit Tests'
      run: npm run test:coverage
      stage_fixed: true

# Build commit messages
prepare-commit-msg:
  jobs:
    - name: 'Prepare Conventional Commit Message'
      interactive: true
      env:
        LEFTHOOK: '0'
      skip:
        - merge
        - rebase
      run: |
        php -r 'echo "‚è≥ Openning Conventional Commit Prompt...\n";'
        npx cz --hook

# Validate commit messages
commit-msg:
  jobs:
    - name: 'Lint Commit Message'
      skip:
        - merge
        - rebase
      run: |
        npx commitlint --edit {1}
        echo 'üîñ Commit message guidelines are followed properly.'

output:
  - summary
  - success
  - failure
  - execution_out
